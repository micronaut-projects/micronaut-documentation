<!DOCTYPE html>
<html lang="en"><head><style type="text/css">.truste_caIcon_display {display: block !important;}</style><style type="text/css">.truste_cursor_pointer {cursor: pointer;}.truste_border_none {border: none;}</style>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:image" content="https://graal.cloud/gdk/resources/img/graalvm.png">
    <meta name="twitter:widgets:border-color" content="#55acee">

    <link rel="stylesheet" href="https://graal.cloud/gdk/resources/lib/highlight/highlight.min.js">
    <script src="https://graal.cloud/gdk/resources/lib/highlight/highlight.min.js"></script>

    <title>Publish Application Logs to Azure Monitor Logs</title>
    <meta name="description" content="The Graal Development Kit for Micronaut (GDK) is a build of a curated set of Micronaut framework modules and their required libraries for building portable c...">
    <meta name="last_modified" content="2024-10-10 16:30:05 +0000">
    <meta name="last_built" content="2024-10-29 09:25:27 +0000">
    <link rel="stylesheet" href="https://graal.cloud/gdk/assets/main.css" >
    <link rel="apple-touch-icon" sizes="180x180" href="https://graal.cloud/gdk/resources/img/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://graal.cloud/gdk/resources/img/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://graal.cloud/gdk/resources/img/favicon/favicon-16x16.png">
    <link rel="manifest" href="https://graal.cloud/gdk/resources/img/favicon/site.webmanifest">
    <link rel="stylesheet" type="text/css" href="https://graal.cloud/gdk/resources/styles/codicon.css" />
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">
    <meta name="google-site-verification" content="-vRqwa9WYn6AaQGnl88xvrLw6ac4xoKVkZkhanmlRhU">
    <link rel="canonical" href="https://www.graal.cloud/gdk/gdk-modules/database/micronaut-data-jdbc-repository/">

    <!-- TODO: move to stylesheet -->
    <style>
        @media (min-width: 768px) {
            .content {
                padding-top: 60px;
            }
        }

        .colist table {
            border: 0;

            td {
                border: 0;
            }

            tr {
                border: 0;
            }
        }

        .imageblock {
            max-width: 50%;
        }

        main{
            padding-top: 50px !important;
        }

        .content{
            padding-top: 0;
        }

        ul.sectlevel0 > li > a:first-of-type {
            color: #F68831 !important;
            font-weight: 700;
        }

        ul.sectlevel1 > li > a {
            color: #dbe6ff;
            font-weight: 400 !important;
            padding-left: 20px;
            font-size: 14px;
        }

            .conum[data-value]::after {
                content: attr(data-value);
                display: inline-block;
                border: 1px solid;
                -webkit-border-radius: 50%;
                border-radius: 50%;
                text-align: center;
                font-size: .75em;
                width: 1.67em;
                height: 1.67em;
                line-height: 1.67em;
                font-family: "Open Sans", "DejaVu Sans", sans-serif;
                font-style: normal;
                font-weight: bold;
            }
            .conum[data-value]+b {
                display: none;
            }

        .sectlevel1 a.active {
            color: #F68831;
            font-weight: bold;
        }
        a.external {
            color: #d6d6d6   !important;
        }
        a.external:hover {
            color: white !important;
            background-color: #1e2631 !important;
        }
    </style>

    <!-- jQuery UI Tabs -->
    <link rel="stylesheet" href="//code.jquery.com/ui/1.14.0/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="https://graal.cloud/gdk/resources/lib/jquery/jquery-ui.css">
    <script type="text/javascript" id="www-widgetapi-script" src="https://www.youtube.com/s/player/a8476471/www-widgetapi.vflset/www-widgetapi.js" async=""></script><script src="https://www.youtube.com/iframe_api"></script><script async="" src="https://tags.bkrtx.com/js/bk-coretag.js"></script><script src="https://graal.cloud/gdk/resources/lib/jquery/jquery-3.7.1.min.js"></script><script src="https://graal.cloud/gdk/resources/lib/bootstrap/js/bootstrap.min.js"></script><script src="https://graal.cloud/gdk/resources/lib/sticky-sidebar/resizeSensor.js"></script><script src="https://graal.cloud/gdk/resources/lib/sticky-sidebar/sticky-sidebar.min.js"></script><script async="" defer="" src="https://buttons.github.io/buttons.js"></script><script async="async" type="text/javascript" src="//consent.trustarc.com/notice?domain=oracle.com&amp;c=teconsent&amp;js=bb&amp;noticeType=bb&amp;text=true&amp;cdn=1&amp;pcookie&amp;gtm=1" crossorigin="" id="truste_0.9548969741402604"></script><script src="https://www.oracle.com/assets/truste-oraclelib.js"></script><script src="https://code.jquery.com/ui/1.14.0/jquery-ui.js"></script></head>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
        const menuLinks = document.querySelectorAll(".sectlevel1 a");

        function highlightMenu() {
            let currentSection = null;

            menuLinks.forEach(link => {
                const section = document.querySelector(link.getAttribute("href"));
                if (section) {
                    const rect = section.getBoundingClientRect();
                    if (rect.top >= 0 && rect.top < window.innerHeight / 2) {
                        currentSection = link;
                    }
                }
            });

            menuLinks.forEach(link => link.classList.remove("active"));

            if (currentSection) {
                currentSection.classList.add("active");
            }
        }

        window.addEventListener("scroll", highlightMenu);
        highlightMenu();

        });</script>
<!-- Add TRUSTe Consent Script and Analytics -->


<!-- jQuery UI Tabs -->

<body class="">
<!-- Start SiteCatalyst code -->
<script language="JavaScript" src="https://www.oracle.com/us/assets/metrics/ora_otn.js"></script><script type="text/javascript" src="https://www.oracleimg.com/us/assets/metrics/ora_code_otn.js"></script><script type="text/javascript" src="https://www.oracleimg.com/us/assets/metrics/ora_code.js"></script>
<!-- End SiteCatalyst code -->

<div class="wrapper wrapper--nofooter">

    <header class="header header--content" role="banner">
        <nav class="menu">
            <div class="menu__row">
                <div>
                    <a href="/gdk/" class="activeMenuItem">
                        <img class="logo-mobile" src="https://graal.cloud/gdk/resources/img/gdk-logo-new.svg" alt="Graal Development Kit for Micronaut logo" style="margin-left: 0px;">
                    </a>
                </div>
                <div class="menu__container">
                    <ul class="menu__list">
                        <li class="menu__item">
                            <a href="/gdk/about/" class="menu__link">About</a>
                        </li>
                        <li class="menu__item">
                            <a href="/gdk/get-started/" class="menu__link">Get Started</a>
                        </li>
                        <li class="menu__item">
                            <div class="stack-container">
                                <a href="#" class="menu__link stack__header">Docs</a>
                                <div class="stack-menu-learn">
                                    <div class="stack-row">
                                        <div class="stack-column">
                                            <div class="stack__item">
                                                <img src="https://graal.cloud/gdk/resources/img/header-navigation/modules.svg">
                                                <a href="/gdk/modules/" class="item-line">Modules</a>
                                            </div>
                                            <div class="stack__item">
                                                <img src="https://graal.cloud/gdk/resources/img/header-navigation/guides.svg">
                                                <a href="/gdk/guides/" class="item-line">Guides</a>
                                            </div>
                                            <div class="stack__item">
                                                <img src="https://graal.cloud/gdk/resources/img/header-navigation/labs.svg">
                                                <a href="/gdk/hands-on-labs/" class="item-line">Hands-On Labs</a>
                                            </div>
                                            <div class="stack__item">
                                                <img src="https://graal.cloud/gdk/resources/img/header-navigation/tools.svg">
                                                <a href="/gdk/vscode-tools/" class="item-line">Tools</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </li>
                        <li class="menu__item">
                            <div class="stack-container">
                                <a href="#" class="menu__link stack__header">Graal Projects</a>
                                <div class="stack-menu">
                                    <div class="stack-row">
                                        <div class="stack-column">
                                            <div class="stack__item">
                                                <img src="https://graal.cloud/gdk/resources/img/header-navigation/graalstack.svg">
                                                <a href="/" class="item-line">Graal</a>
                                            </div>
                                            <div class="stack__item">
                                                <img src="https://graal.cloud/gdk/resources/img/header-navigation/graalvm.svg">
                                                <a href="https://graalvm.org/" class="item-line">GraalVM</a>
                                            </div>
                                            <div class="stack__item">
                                                <img src="https://graal.cloud/gdk/resources/img/header-navigation/graalos.svg">
                                                <a href="/graalos/" class="item-line">GraalOS</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </li>
                        <li class="menu__launch__mobile">
                            <a href="/gdk/launcher/" class="btn-launch btn btn-primary" target="blank">Create App</a>
                        </li>
                    </ul>
                </div>
                <div class="menu__launch">
                    <a href="/gdk/launcher/" class="btn-launch btn btn-primary" target="blank">Create App</a>
                </div>
            </div>

            <div role="button" class="menu-btn menu-btn--menu js-show-menu" tabindex="-1" title="sweet hamburger">
                <div class="hamburger">
                    <div class="inner"></div>
                </div>
            </div>
            <button aria-label="hamburger mobile menu" class="btn btn-mobile-menu js-show-menu">
                <div class="inner"></div>
            </button>
        </nav>


    </header>


    <main class="content" aria-label="Content">
        <div class="wrapper wrapper-content">
            <article>
                <div class="row d-flex flex-wrap">
                    <div class="col-sm-3 docsimpro col-bg">
                        <div class="sidebar-wrap is-affixed" style="height: 473px; position: relative;"><div class="inner-wrapper-sticky" style="position: fixed; top: 74px; left: 0px; width: 300px;">
                            <div class="sidebar">
                                <div class="menuabout">
                                    <img id="sidebarClose" src="https://graal.cloud/gdk/resources/img/arrow_sidebar(close).svg" alt="Expand or collapse sidebar" class="btn-color no-display">
                                    <img id="sidebarOpen" src="https://graal.cloud/gdk/resources/img/arrow_sidebar.svg" alt="Expand or collapse sidebar">
                                </div>

                                                                <div class="toc-floating">
                                <div class="toc-bullets">
                                    <li class="toc-bullets-main">
                                        <a href="/gdk/docs/gdk-modules/logging/" class="_icon-book">
                                            Logging
                                        </a>
                                    </li>
                                    <li class="toc-bullets-sub toc-bullets-highlight">
                                        <a href="/gdk/gdk-modules/logging/micronaut-azure-logging/" class="activeMenuItem">
                                            Publish Application Logs to Azure Monitor Logs
                                        </a>
                                    </li>
                                    <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#create-the-application">1. Create the Application</a></li>
<li><a href="#create-azure-cloud-resources">2. Create Azure Cloud Resources</a></li>
<li><a href="#configure-appender-and-application-configuration">3. Configure Appender and Application Configuration</a></li>
<li><a href="#run-the-application-publish-and-view-logs">4. Run the Application, Publish and View Logs</a></li>
<li><a href="#clean-up-cloud-resources">5. Clean up Cloud Resources</a></li>
</ul>
</div>
                                </div>
                            </div>


                            </div>
                            <div class="resize-sensor" style="position: absolute; inset: 0px; overflow: hidden; z-index: -1; visibility: hidden;"><div class="resize-sensor-expand" style="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;"><div style="position: absolute; left: 0px; top: 0px; transition: all 0s ease 0s; width: 100000px; height: 100000px;"></div></div><div class="resize-sensor-shrink" style="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;"><div style="position: absolute; left: 0; top: 0; transition: 0s; width: 200%; height: 200%"></div></div></div></div></div>
                        <div class="resize-sensor" style="position: absolute; inset: 0px; overflow: hidden; z-index: -1; visibility: hidden;"><div class="resize-sensor-expand" style="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;"><div style="position: absolute; left: 0px; top: 0px; transition: all 0s ease 0s; width: 100000px; height: 100000px;"></div></div><div class="resize-sensor-shrink" style="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;"><div style="position: absolute; left: 0; top: 0; transition: 0s; width: 200%; height: 200%"></div></div></div></div>

                    <div class="col-sm-9 docsmod">
                        <div id="content-wrapper" class="docs-content docs-content--with-sidebar"><h1>Publish Application Logs to Azure Monitor Logs</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This guide describes how to use the Graal Development Kit for Micronaut (GDK) to create an application that publishes logs to Azure Monitor Logs.
Typically, application logs are written to <code>stdout</code> and to files, but the Micronaut® Logging module supports multiple logging frameworks such as <a href="https://logback.qos.ch/">Logback</a>, and logging to various other appenders, to email, a database, or other destinations.</p>
</div>
<div class="paragraph">
<p><strong>Prerequisites</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>JDK 17 or higher. See <a href="/gdk/get-started/setting-up-desktop/">Setting up Your Desktop</a>.</p>
</li>
<li>
<p>An Azure account. See <a href="/gdk/get-started/setting-up-cloud-accounts/">Setting up Your Cloud Accounts</a>.</p>
</li>
<li>
<p>The Azure CLI. Follow the <a href="https://learn.microsoft.com/cli/azure/install-azure-cli">Azure documentation</a> for installing or updating the latest version of the Azure CLI.</p>
</li>
<li>
<p>An Azure user with sufficient permissions to configure Azure Monitor Logs.</p>
</li>
<li>
<p>The GDK CLI. See <a href="/gdk/get-started/setting-up-desktop/">Setting up Your Desktop</a>. (Optional.)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Follow the steps below to create the application from scratch. However, you can also download the completed example:</p>
</div>
<div class="gradle-maven-tabs ui-tabs ui-corner-all ui-widget ui-widget-content">
    <ul role="tablist" class="ui-tabs-nav ui-corner-all ui-helper-reset ui-helper-clearfix ui-widget-header">
        <li class="tabs-gradle ui-tabs-tab ui-corner-top ui-state-default ui-tabs-active ui-state-active" role="tab" tabindex="0" aria-controls="gradle" aria-labelledby="ui-id-1" aria-selected="true" aria-expanded="true"><a name="gradle" href="#gradle" tabindex="-1" class="ui-tabs-anchor" id="ui-id-1">Gradle</a></li>
        <li class="tabs-maven ui-tabs-tab ui-corner-top ui-state-default" role="tab" tabindex="-1" aria-controls="maven" aria-labelledby="ui-id-2" aria-selected="false" aria-expanded="false"><a name="maven" href="#maven" tabindex="-1" class="ui-tabs-anchor" id="ui-id-2">Maven</a></li>
    </ul>
    <div id="gradle" aria-labelledby="ui-id-1" role="tabpanel" class="ui-tabs-panel ui-corner-bottom ui-widget-content" aria-hidden="false">
        <a href="https://github.com/oracle/graal-dev-kit/releases/download/4.7.3.5/4.7.3.5_logging_azure-logging-demo-java-gradle.zip">Gradle Azure Logging Example <img src="https://graal.cloud/gdk/resources/img/gdk_modules/download-archive.png" alt="Download completed example" class="download-img-guides"/></a>
    </div>
    <div id="maven" aria-labelledby="ui-id-2" role="tabpanel" class="ui-tabs-panel ui-corner-bottom ui-widget-content" aria-hidden="true" style="display: none;">
        <a href="https://github.com/oracle/graal-dev-kit/releases/download/4.7.3.5/4.7.3.5_logging_azure-logging-demo-java-maven.zip">Maven Azure Logging Example <img src="https://graal.cloud/gdk/resources/img/gdk_modules/download-archive.png" alt="Download completed example" class="download-img-guides"/></a>
    </div>
</div>
<div class="paragraph">
<p>The application ZIP file will be downloaded in your default downloads directory. Unzip it and proceed to the next steps.</p>
</div>
<h4 id="a-note-regarding-your-development-environment" class="discrete">A note regarding your development environment</h4>
<div class="paragraph">
<p>Consider using Visual Studio Code, which provides native support for developing applications with the <a href="https://marketplace.visualstudio.com/items?itemName=oracle-labs-graalvm.graal-cloud-native-pack">Graal Development Kit for Micronaut Extension Pack</a>.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Note: If you use IntelliJ IDEA, <a href="/gdk/resources/img/annotationprocessorsintellij.png">enable annotation processing</a>.</p>
</div>
</blockquote>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Windows platform: The GDK guides are compatible with Gradle only. Maven support is coming soon.</p>
</div>
</blockquote>
</div>
</div>
</div>
<div class="sect1">
<h2 id="create-the-application">1. Create the Application</h2>
<div class="sectionbody">
<p>Create an application using the GDK Launcher.</p>
<ol>
    <li>
        <p>Open the <a href="https://graal.cloud/gdk/launcher/?advanced=true" target="_blank">GDK Launcher in advanced mode</a>.</p>
    </li>
    <li>Create a new project using the following selections.
        <ul>
            <li><strong>Project Type</strong>: <em>Application</em> (Default)</li>
            <li><strong>Project Name</strong>: <em>azure-logging-demo</em></li>
            <li><strong>Base Package</strong>: <em>com.example</em> (Default)</li>
            <li><strong>Clouds</strong>: <em>Azure</em></li>
            <li><strong>Build Tool</strong>: <em>Gradle (Groovy)</em> or <em>Maven</em></li>
            <li><strong>Language</strong>: <em>Java</em> (Default)</li>
            <li><strong>Test Framework</strong>: <em>JUnit</em> (Default)</li>
            <li><strong>Java Version</strong>: <em>17</em> (Default)</li>
            <li><strong>Micronaut Version</strong>: (Default)</li>
            <li><strong>Cloud Services</strong>: <em>Logging</em></li>
            <li><strong>Features</strong>: <em>GraalVM Native Image</em> (Default)</li>
            <li><strong>Sample Code</strong>: <em>Yes</em> (Default)</li>
        </ul>
    </li>
    <li>Click <strong>Generate Project</strong>, then click <strong>Download Zip</strong>. The GDK Launcher creates an application with the package <code>com.example</code> in a directory named <em>azure-logging-demo</em>. The application ZIP file will be downloaded to your default downloads directory. Unzip it, open it in your code editor, and proceed to the next steps.</li>
</ol>
<div class="paragraph">
<p>Alternatively, use the  <a href="/gdk/get-started/using-gdk-cli/">GDK CLI</a> as follows:</p>
</div>
<div class="gradle-maven-tabs ui-tabs ui-corner-all ui-widget ui-widget-content">
    <ul role="tablist" class="ui-tabs-nav ui-corner-all ui-helper-reset ui-helper-clearfix ui-widget-header">
        <li class="tabs-gradle ui-tabs-tab ui-corner-top ui-state-default ui-tabs-active ui-state-active" role="tab" tabindex="0" aria-controls="gradle" aria-labelledby="ui-id-1" aria-selected="true" aria-expanded="true"><a name="gradle" href="#gradle" tabindex="-1" class="ui-tabs-anchor" id="ui-id-1">Gradle</a></li>
        <li class="tabs-maven ui-tabs-tab ui-corner-top ui-state-default" role="tab" tabindex="-1" aria-controls="maven" aria-labelledby="ui-id-2" aria-selected="false" aria-expanded="false"><a name="maven" href="#maven" tabindex="-1" class="ui-tabs-anchor" id="ui-id-2">Maven</a></li>
    </ul>
    <div id="gradle" aria-labelledby="ui-id-1" role="tabpanel" class="ui-tabs-panel ui-corner-bottom ui-widget-content" aria-hidden="false">
        <pre><code class="language-bash hljs" data-highlighted="yes">gdk create-app com.example.azure-logging-demo \
 --clouds=azure \
 --services=logging \
 --features=graalvm \
 --build=gradle \
 --jdk=17  \
 --lang=java</code><button>Copy</button></pre>
    </div>
    <div id="maven" aria-labelledby="ui-id-2" role="tabpanel" class="ui-tabs-panel ui-corner-bottom ui-widget-content" aria-hidden="true" style="display: none;">
        <pre><code class="language-bash hljs" data-highlighted="yes">gdk create-app com.example.azure-logging-demo \
 --clouds=azure \
 --services=logging \
 --features=graalvm \
 --build=maven \
 --jdk=17  \
 --lang=java</code><button>Copy</button></pre>
    </div>
</div>
<div class="paragraph">
<p>Open the <em>micronaut-cli.yml</em> file, you can see what features are packaged with the application:</p>
</div>
<pre><code class="language-bash hljs" data-highlighted="yes">features: [app-name, gdk-azure-cloud-app, gdk-azure-logging, gdk-bom, gdk-license, graalvm, http-client, java, java-application, junit, logback, maven, maven-enforcer-plugin, micronaut-http-validation, netty-server, properties, readme, serialization-jackson, shade, static-resources]</code><button>Copy</button></pre>
<div class="paragraph">
<p>The GDK Launcher creates a multi-module project with two subprojects: <strong>azure</strong> for Microsoft Azure, and <strong>lib</strong> for common code and configuration shared across cloud platforms.
You develop the application logic in the <strong>lib</strong> subproject, and keep the
Microsoft Azure-specific configurations in the <strong>azure</strong> subproject.</p>
</div>
<div class="paragraph">
<p>The Micronaut Logging service that you selected at the project generation step bundles Logback, Jackson Databind, Azure Logging, and other necessary dependencies.
The <a href="https://logback.qos.ch/">Logback</a> appender publishes logs to Azure Monitor Logs.</p>
</div>
<div class="sect2">
<h3 id="controller-class">1.1. Controller Class</h3>
<div class="paragraph">
<p>The example code includes a controller in a file named <em>azure/src/main/java/com/example/LogController.java</em>, which enables you to send <code>POST</code> requests to publish a message to a log:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package com.example;

import io.micronaut.http.annotation.Body;
import io.micronaut.http.annotation.Controller;
import io.micronaut.http.annotation.Post;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

@Controller
class LogController {

    private static final Logger LOG = LoggerFactory.getLogger(LogController.class);

    @Post("/log")
    void log(@Body String message) {
        LOG.info(message);
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="create-azure-cloud-resources">2. Create Azure Cloud Resources</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You will create a resource group, a Log Analytics Workspace and a table in the workspace to hold log event data, a Data Collection Endpoint, and a Data Collection Rule.</p>
</div>
<div class="paragraph">
<p>First define the following environment variables. You can customize the values as needed:</p>
</div>
<div class="tabs-doc ui-tabs ui-corner-all ui-widget ui-widget-content" data-name="system">
    <div data-value="linux" data-label="Linux &amp; macOS" id="linux" aria-labelledby="ui-id-11" role="tabpanel" class="ui-tabs-panel ui-corner-bottom ui-widget-content" aria-hidden="false" style="">
      <pre><code class="language-bash hljs" data-highlighted="yes"><span class="hljs-built_in">export</span> LOCATION=<span class="hljs-string">eastus</span>
<span class="hljs-built_in">export</span> TABLE_NAME=<span class="hljs-string">GDKTable_CL</span>
<span class="hljs-built_in">export</span> COLLECTION_ENDPOINT_NAME=<span class="hljs-string">gdkCollectionEndpoint</span>
<span class="hljs-built_in">export</span> RESOURCE_GROUP_NAME=<span class="hljs-string">gdkguidelogging</span>
<span class="hljs-built_in">export</span> GDK_WORK_SPACE=<span class="hljs-string">gdktworkspace</span>
<span class="hljs-built_in">export</span> STREAM_NAME=<span class="hljs-string">Custom-GDKTable</span>
</code><button>Copy</button></pre>
    </div>
    <div data-value="windows" data-label="Windows" id="windows" aria-labelledby="ui-id-12" role="tabpanel" class="ui-tabs-panel ui-corner-bottom ui-widget-content" aria-hidden="true" style="display: none;">
      <pre><code class="language-bash hljs" data-highlighted="yes"><span class="hljs-built_in">set</span> LOCATION=<span class="hljs-string">eastus</span>
<span class="hljs-built_in">set</span> TABLE_NAME=<span class="hljs-string">GDKTable_CL</span>
<span class="hljs-built_in">set</span> COLLECTION_ENDPOINT_NAME=<span class="hljs-string">gdkCollectionEndpoint</span>
<span class="hljs-built_in">set</span> RESOURCE_GROUP_NAME=<span class="hljs-string">gdkguidelogging</span>
<span class="hljs-built_in">set</span> GDK_WORK_SPACE=<span class="hljs-string">gdktworkspace</span>
<span class="hljs-built_in">set</span> STREAM_NAME=<span class="hljs-string">Custom-GDKTable</span>
</code><button>Copy</button></pre>
    </div>
    <div data-value="windows-powershell" data-label="Windows PowerShell" id="windows-powershell" aria-labelledby="ui-id-13" role="tabpanel" class="ui-tabs-panel ui-corner-bottom ui-widget-content" aria-hidden="true" style="display: none;">
      <pre><code class="language-bash hljs" data-highlighted="yes"><span class="hljs-variable">$ENV:</span> LOCATION=<span class="hljs-string">eastus</span>
<span class="hljs-variable">$ENV:</span> TABLE_NAME=<span class="hljs-string">GDKTable_CL</span>
<span class="hljs-variable">$ENV:</span> COLLECTION_ENDPOINT_NAME=<span class="hljs-string">gdkCollectionEndpoint</span>
<span class="hljs-variable">$ENV:</span> RESOURCE_GROUP_NAME=<span class="hljs-string">gdkguidelogging</span>
<span class="hljs-variable">$ENV:</span> GDK_WORK_SPACE=<span class="hljs-string">gdktworkspace</span>
<span class="hljs-variable">$ENV:</span> STREAM_NAME=<span class="hljs-string">Custom-GDKTable</span>
</code><button>Copy</button></pre>
    </div>
</div>
<div class="sect2">
<h3 id="create-a-resource-group">2.1. Create a Resource Group</h3>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Some of the following commands use <a href="https://stedolan.github.io/jq/"><code>jq</code></a>, which is a lightweight and flexible command-line JSON processor.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>We recommend that you create a new <a href="https://learn.microsoft.com/en-us/azure/azure-resource-manager/management/overview#resource-groups">resource group</a> for this guide, but you can use an existing resource group instead.</p>
</div>
<div class="paragraph">
<p>Run the <a href="https://learn.microsoft.com/en-us/cli/azure/group?view=azure-cli-latest#az-group-create">az group create</a> command to create a resource group named <em>gdkguides</em> in the <em>eastus</em> region:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">az group create --location $LOCATION --name $RESOURCE_GROUP_NAME</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you prefer using the region geographically closer to you, run <code>az account list-locations</code> to list all available regions.</p>
</div>
</div>
<div class="sect2">
<h3 id="add-the-monitor-control-service-cli-extension">2.2. Add the monitor-control-service CLI Extension</h3>
<div class="paragraph">
<p>Run the <a href="https://learn.microsoft.com/en-us/cli/azure/extension?view=azure-cli-latest#az-extension-add">az extension add</a> command to add the <em>monitor-control-service</em> CLI Extension:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">az extension add -n monitor-control-service</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="add-the-log-analytics-cli-extension">2.3. Add the log-analytics CLI Extension</h3>
<div class="paragraph">
<p>Run the <a href="https://learn.microsoft.com/en-us/cli/azure/extension?view=azure-cli-latest#az-extension-add">az extension add</a> command to add the <em>log-analytics</em> CLI Extension:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">az extension add -n log-analytics</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="create-a-log-analytics-workspace">2.4. Create a Log Analytics Workspace</h3>
<div class="paragraph">
<p>Run the <a href="https://learn.microsoft.com/en-us/cli/azure/monitor/log-analytics/workspace?view=azure-cli-latest#az-monitor-log-analytics-workspace-create">az monitor log-analytics workspace create</a> command to create a Log Analytics Workspace:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">WORKSPACE_RES=$(az monitor log-analytics workspace create \
    --name $GDK_WORK_SPACE \
    --resource-group $RESOURCE_GROUP_NAME )
echo $WORKSPACE_RES</code></pre>
</div>
</div>
<div class="paragraph">
<p>The response should look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "createdDate": "2024-08-19T20:11:18.4002398Z",
  "customerId": "c222d080-5b14-43e7-b648-71c2b358dc74",
  ...
  "name": "gdkworkspace",
  "provisioningState": "Creating",
   ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Save the value of the <em>customerId</em> attribute. This is your workspace GUID, and it will be needed later.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">GDK_WORK_SPACE_ID=$(echo $WORKSPACE_RES | jq -r .customerId)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="create-a-data-collection-endpoint">2.5. Create a Data Collection Endpoint</h3>
<div class="paragraph">
<p>Run the <a href="https://learn.microsoft.com/en-us/cli/azure/monitor/data-collection/endpoint?view=azure-cli-latest#az-monitor-data-collection-endpoint-create">az monitor data-collection endpoint create</a> command to create a Data Collection Endpoint:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">COLLECTION_ENDPOINT_CREATE=$(az monitor data-collection endpoint create \
    --data-collection-endpoint-name $COLLECTION_ENDPOINT_NAME \
    --public-network-access Enabled \
    --resource-group $RESOURCE_GROUP_NAME )
echo $COLLECTION_ENDPOINT_CREATE</code></pre>
</div>
</div>
<div class="paragraph">
<p>The response should look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  ...
  "logsIngestion": {
    "endpoint": "https://gdkcollectionendpoint-xxxx.eastus-1.ingest.monitor.azure.com"
  },
  ...
  "name": "gdkCollectionEndpoint",
  ...
  "type": "Microsoft.Insights/dataCollectionEndpoints"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Save the value of the <em>logsIngestion.endpoint</em> attribute. This is the logs ingestion endpoint URL, and it will be needed later.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">COLLECTION_ENDPOINT_URL=$(echo $COLLECTION_ENDPOINT_CREATE | jq -r '.logsIngestion.endpoint|ltrimstr("https://")')</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="create-a-table-in-your-log-analytics-workspace">2.6. Create a Table in Your Log Analytics Workspace</h3>
<div class="paragraph">
<p>Run the <a href="https://learn.microsoft.com/en-us/cli/azure/monitor/log-analytics/workspace/table?view=azure-cli-latest#az-monitor-log-analytics-workspace-table-create">az monitor log-analytics workspace table create</a> command to create a table in your Log Analytics workspace to hold the log records:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">az monitor log-analytics workspace table create \
    --name $TABLE_NAME \
    --workspace-name $GDK_WORK_SPACE \
    --columns EventTimestamp=long Source=string Subject=string Data=string TimeGenerated=datetime \
    --resource-group $RESOURCE_GROUP_NAME</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="create-a-data-collection-rule">2.7. Create a Data Collection Rule</h3>
<div class="paragraph">
<p>Create a file named <em>dcr.json</em> with this content:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
   "location": "LOCATION",
   "properties": {
      "streamDeclarations": {
         "STREAM_NAME": {
            "columns": [
               {
                  "name": "TimeGenerated",
                  "type": "datetime"
               },
               {
                  "name": "EventTimestamp",
                  "type": "long"
               },
               {
                  "name": "Source",
                  "type": "string"
               },
               {
                  "name": "Subject",
                  "type": "string"
               },
               {
                  "name": "Data",
                  "type": "string"
               }
            ]
         }
      },
      "destinations": {
         "logAnalytics": [
            {
               "workspaceResourceId": "/subscriptions/SUBSCRIPTION_ID/resourceGroups/RESOURCE_GROUP_NAME/providers/microsoft.operationalinsights/workspaces/GDK_WORK_SPACE",
               "name": "gdkLogDestination"
            }
         ]
      },
      "dataFlows": [
         {
            "streams": [
               "STREAM_NAME"
            ],
            "destinations": [
               "gdkLogDestination"
            ],
            "transformKql": "source | extend TimeGenerated = now()",
            "outputStream": "Custom-TABLE_NAME"
         }
      ]
   }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Substitute the placeholders inside the file with the environment variables you saved earlier.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">sed -i -e "s/LOCATION/$LOCATION/" dcr.json
sed -i -e "s/SUBSCRIPTION_ID/$SUBSCRIPTION_ID/" dcr.json
sed -i -e "s/RESOURCE_GROUP_NAME/$RESOURCE_GROUP_NAME/" dcr.json
sed -i -e "s/GDK_WORK_SPACE/$GDK_WORK_SPACE/" dcr.json
sed -i -e "s/TABLE_NAME/$TABLE_NAME/" dcr.json
sed -i -e "s/STREAM_NAME/$STREAM_NAME/" dcr.json</code></pre>
</div>
</div>
<div class="paragraph">
<p>Run the <a href="https://learn.microsoft.com/en-us/cli/azure/monitor/data-collection/rule?view=azure-cli-latest#az-monitor-data-collection-rule-create">az monitor data-collection rule create</a> command to create a data collection rule:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">RULE_RESULT=$(az monitor data-collection rule create \
    --name gdkCollectionRule \
    --location $LOCATION \
    --endpoint-id /subscriptions/$SUBSCRIPTION_ID/resourceGroups/$RESOURCE_GROUP_NAME/providers/Microsoft.Insights/dataCollectionEndpoints/$COLLECTION_ENDPOINT_NAME \
    --rule-file "dcr.json" \
    --resource-group $RESOURCE_GROUP_NAME )
echo $RULE_RESULT</code></pre>
</div>
</div>
<div class="paragraph">
<p>The response should look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "dataCollectionEndpointId": "/subscriptions/fe053...",
  "dataFlows": [
    {
      "destinations": [
        "gdkLogDestination"
      ],
      "outputStream": "Custom-GDKTable_CL",
      "streams": [
        "Custom-GDKTable"
      ],
      "transformKql": "source | extend TimeGenerated = now()"
    }
  ],
  ...
  "immutableId": "dcr-e7ebfceb7df24631b64d7ae880eb8ada",
  "location": "eastus",
  "name": "gdkCollectionRule",
  ...
  "type": "Microsoft.Insights/dataCollectionRules"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Save the value of the <em>immutableId</em> attribute. This is the rule ID, and it will be needed later.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">RULE_ID=$(echo $RULE_RESULT | jq -r .immutableId)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="authorize-sending-logs">2.8. Authorize Sending Logs</h3>
<div class="paragraph">
<p>Define the following environment variables:</p>
</div>
<div class="tabs-doc ui-tabs ui-corner-all ui-widget ui-widget-content" data-name="system">
    <div data-value="linux" data-label="Linux &amp; macOS" id="linux" aria-labelledby="ui-id-11" role="tabpanel" class="ui-tabs-panel ui-corner-bottom ui-widget-content" aria-hidden="false" style="">
      <pre><code class="language-bash hljs" data-highlighted="yes"><span class="hljs-built_in">export</span> SUBSCRIPTION_ID=<span class="hljs-string">&lt;subscription-id&gt;</span>
<span class="hljs-built_in">export</span> SUBSCRIPTION_EMAIL=<span class="hljs-string">&lt;email&gt;</span>
</code><button>Copy</button></pre>
    </div>
    <div data-value="windows" data-label="Windows" id="windows" aria-labelledby="ui-id-12" role="tabpanel" class="ui-tabs-panel ui-corner-bottom ui-widget-content" aria-hidden="true" style="display: none;">
      <pre><code class="language-bash hljs" data-highlighted="yes"><span class="hljs-built_in">set</span> SUBSCRIPTION_ID=<span class="hljs-string">&lt;subscription-id&gt;</span>
<span class="hljs-built_in">set</span> SUBSCRIPTION_EMAIL=<span class="hljs-string">&lt;email&gt;</span>
</code><button>Copy</button></pre>
    </div>
    <div data-value="windows-powershell" data-label="Windows PowerShell" id="windows-powershell" aria-labelledby="ui-id-13" role="tabpanel" class="ui-tabs-panel ui-corner-bottom ui-widget-content" aria-hidden="true" style="display: none;">
      <pre><code class="language-bash hljs" data-highlighted="yes"><span class="hljs-variable">$ENV:</span> SUBSCRIPTION_ID=<span class="hljs-string">&lt;subscription-id&gt;</span>
<span class="hljs-variable">$ENV:</span> SUBSCRIPTION_EMAIL=<span class="hljs-string">&lt;email&gt;</span>
</code><button>Copy</button></pre>
    </div>
</div>
<div class="paragraph">
<p>replacing <em>&lt;email&gt;</em> with the email address associated with your account, and <em>&lt;subscription-id&gt;</em> with your Azure Subscription ID.</p>
</div>
<div class="paragraph">
<p>Authorize sending logs by assigning the <em>Monitoring Metrics Publisher</em> role to yourself:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">az role assignment create \
    --role "Monitoring Metrics Publisher" \
    --assignee $SUBSCRIPTION_EMAIL \
    --scope "/subscriptions/$SUBSCRIPTION_ID/resourceGroups/$RESOURCE_GROUP_NAME/providers/Microsoft.Insights/dataCollectionRules/gdkCollectionRule"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that it can take a few minutes for the role grant to propagate.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configure-appender-and-application-configuration">3. Configure Appender and Application Configuration</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="logback-appender">3.1. Logback Appender</h3>
<div class="paragraph">
<p>The GDK Launcher generated a file named <em>azure/src/main/resources/logback.xml</em> containing the configuration for an appender that publishes log events to Azure Monitor Logs:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;configuration debug='false'&gt;

    &lt;!--
    You can un-comment the STDOUT appender and &lt;appender-ref ref='STDOUT'/&gt; in
    the cloud appender to log to STDOUT as the 'emergency' appender.
    --&gt;

    &lt;!--
    &lt;appender name='STDOUT' class='ch.qos.logback.core.ConsoleAppender'&gt;
        &lt;encoder&gt;
            &lt;pattern&gt;%cyan(%d{HH:mm:ss.SSS}) %gray([%thread]) %highlight(%-5level) %magenta(%logger{36}) - %msg%n&lt;/pattern&gt;
        &lt;/encoder&gt;
    &lt;/appender&gt;
    --&gt;

    &lt;appender name='AZURE' class='io.micronaut.azure.logging.AzureAppender'&gt;
        &lt;!-- &lt;appender-ref ref='STDOUT'/&gt; --&gt;
        &lt;encoder class='ch.qos.logback.core.encoder.LayoutWrappingEncoder'&gt;
            &lt;layout class='ch.qos.logback.contrib.json.classic.JsonLayout'&gt;
                &lt;jsonFormatter class='io.micronaut.azure.logging.AzureJsonFormatter'/&gt;
            &lt;/layout&gt;
        &lt;/encoder&gt;
    &lt;/appender&gt;

    &lt;root level='INFO'&gt;
        &lt;appender-ref ref='AZURE'/&gt;
    &lt;/root&gt;

&lt;/configuration&gt;</code></pre>
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Note: You can un-comment the STDOUT appender as the 'emergency' appender. See the file for details.</p>
</div>
</blockquote>
</div>
</div>
<div class="sect2">
<h3 id="set-application-configuration-properties">3.2. Set Application Configuration Properties</h3>
<div class="paragraph">
<p>Update the Azure <em>application.properties</em> as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties"><i class="conum" data-value="1"></i><b>(1)</b>
azure.logging.data-collection-endpoint=&lt;endpoint&gt;
<i class="conum" data-value="2"></i><b>(2)</b>
azure.logging.rule-id=&lt;ruleid&gt;
<i class="conum" data-value="3"></i><b>(3)</b>
azure.logging.stream-name=Custom-GDKTable</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>1</strong> Replace &lt;endpoint&gt; with the logs ingestion endpoint URL that you saved earlier</p>
</div>
<div class="paragraph">
<p><strong>2</strong> Replace &lt;ruleid&gt; with the rule ID that you saved earlier</p>
</div>
<div class="paragraph">
<p><strong>3</strong> Set the value of the <em>azure.logging.stream-name</em> property with the name of the workspace table you created, "Custom-GDKTable"</p>
</div>
<div class="paragraph">
<p>Having configured the appender and the application configuration, you can proceed to run the application, publishing the logs.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="run-the-application-publish-and-view-logs">4. Run the Application, Publish and View Logs</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To run the application, use the following command, which starts the application on port 8080.</p>
</div>
<div class="gradle-maven-tabs ui-tabs ui-corner-all ui-widget ui-widget-content">
    <ul role="tablist" class="ui-tabs-nav ui-corner-all ui-helper-reset ui-helper-clearfix ui-widget-header">
        <li class="tabs-gradle ui-tabs-tab ui-corner-top ui-state-default ui-tabs-active ui-state-active" role="tab" tabindex="0" aria-controls="gradle" aria-labelledby="ui-id-1" aria-selected="true" aria-expanded="true"><a name="gradle" href="#gradle" tabindex="-1" class="ui-tabs-anchor" id="ui-id-1">Gradle</a></li>
        <li class="tabs-maven ui-tabs-tab ui-corner-top ui-state-default" role="tab" tabindex="-1" aria-controls="maven" aria-labelledby="ui-id-2" aria-selected="false" aria-expanded="false"><a name="maven" href="#maven" tabindex="-1" class="ui-tabs-anchor" id="ui-id-2">Maven</a></li>
    </ul>
    <div id="gradle" aria-labelledby="ui-id-1" role="tabpanel" class="ui-tabs-panel ui-corner-bottom ui-widget-content" aria-hidden="false">
        <pre><code class="language-bash hljs" data-highlighted="yes">./gradlew :azure:run</code><button>Copy</button></pre>
    </div>
    <div id="maven" aria-labelledby="ui-id-2" role="tabpanel" class="ui-tabs-panel ui-corner-bottom ui-widget-content" aria-hidden="true" style="display: none;">
        <pre><code class="language-bash hljs" data-highlighted="yes">./mvnw install -pl lib -am
./mvnw mn:run -pl azure</code><button>Copy</button></pre>
    </div>
</div>
<div class="paragraph">
<p>Send some <code>curl</code> requests to test logging:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">MESSAGE="Hello World"
POST_RES=$(curl -s -id '{"message":"'"$MESSAGE"'"}' \
       -H "Content-Type: application/json" \
       -X POST http://localhost:8080/log)
echo $POST_RES</code></pre>
</div>
</div>
<div class="paragraph">
<p>Run the <a href="https://learn.microsoft.com/en-us/cli/azure/monitor/log-analytics?view=azure-cli-latest#az-monitor-log-analytics-query">az monitor log-analytics query</a> command to retrieve log events that were pushed while running your application:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">  LOG_RES=$(az monitor log-analytics query \
  --workspace $GDK_WORK_SPACE_ID  \
  --analytics-query "search in ($TABLE_NAME) \"$MESSAGE\" | where TimeGenerated &gt; ago(1h) | take 1" )
  echo $LOG_RES</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that it can take a few minutes for log entries be available.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="clean-up-cloud-resources">5. Clean up Cloud Resources</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Once you are done with this guide, you can delete the Azure resources created to avoid incurring unnecessary charges.</p>
</div>
<div class="paragraph">
<p>Delete the resource group and all of its resources with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">az group delete --name $RESOURCE_GROUP_NAME</code></pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, run these commands to delete resources individually:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">az monitor data-collection rule delete --name gdkCollectionRule --resource-group $RESOURCE_GROUP_NAME</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">az monitor log-analytics workspace table delete --name $TABLE_NAME --workspace-name $GDK_WORK_SPACE --resource-group $RESOURCE_GROUP_NAME</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">az monitor data-collection endpoint delete --name $COLLECTION_ENDPOINT_NAME --resource-group $RESOURCE_GROUP_NAME</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">az monitor log-analytics workspace delete --workspace-name $GDK_WORK_SPACE --resource-group $RESOURCE_GROUP_NAME --force</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">az group delete --name $RESOURCE_GROUP_NAME</code></pre>
</div>
</div>
<h3 id="summary" class="discrete">Summary</h3>
<div class="paragraph">
<p>This guide demonstrated how to use the GDK to create an application that publishes logs to Azure Monitor Logs.
Then, using Azure Monitor Logs, you viewed the logs produced by the application.
Finally, you saw how to build a native executable for this application with GraalVM Native Image, and ran it to test publishing logs to Azure Monitor Logs.</p>
</div>
<h3 id="related-documentation" class="discrete">Related Documentation</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://micronaut-projects.github.io/micronaut-azure/latest/guide/#logging">Micronaut Azure Logging</a></p>
</li>
<li>
<p><a href="https://learn.microsoft.com/en-us/azure/azure-monitor/logs/data-platform-logs">Azure Monitor Logs</a></p>
</li>
<li>
<p><a href="https://www.graalvm.org/">GraalVM Native Image</a></p>
</li>
</ul>
</div>
</div>
</div></div>
                        <div role="button" class="menu-btn menu-btn--sidebar js-show-sidebar" title="sweet hamburger">
                            <div class="hamburger">
                                <div class="inner"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </article>



        </div>

    </main>


    <footer class="footer footer__mobile">

        <div class="container-fluid container-fluid--custom-sm">
            <div class="row">
                <div class="col-12 col-sm-12 col-md-12 col-lg-12">
                    <div class="row footer-content">
                        <div class="col-md-3 col-sm-4">
                            <h6 class="title-footer" onclick="fadeInAndOut(this)">Learn</h6>
                            <div class="grow">
                                <ul class="footer-list">
                                    <li class="footer-list__item"><a href="/gdk/get-started/">Get Started</a></li>
                                    <li class="footer-list__item"><a href="/gdk/guides/">Guides</a></li>
                                    <li class="footer-list__item"><a href="/gdk/hands-on-labs/">Labs</a></li>
                                    <li class="footer-list__github">
                                        <img class="footer__icon" src="https://graal.cloud/gdk/resources/img/footer/logo-github.svg" alt="Github icon">
                                        <a href="https://github.com/oracle/graal-dev-kit" target="blank">Github</a>
                                    </li>
                                    <li class="footer-list__github">
                                        <img class="footer__icon" src="https://graal.cloud/gdk/resources/img/footer/slack-icon.svg" alt="Github icon">
                                        <a href="https://bit.ly/odevrel_slack" target="blank">#graal-dev-kit-for-micronaut</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <div class="col-md-3 col-sm-4">
                            <h6 class="title-footer" onclick="fadeInAndOut(this)">About</h6>
                            <div class="grow">
                                <ul class="footer-list">
                                    <li class="footer-list__item"><a href="/gdk/about/#gdk-support" target="blank">Commercial Support</a></li>
                                    <li class="footer-list__item"><a href="https://www.graalvm.org/" target="blank">GraalVM Native Image</a></li>
                                    <li class="footer-list__item"><a href="https://micronaut.io/" target="_blank">Micronaut<sup>®</sup> Framework</a></li>
                                    <li class="footer-list__item"><a href="https://www.oracle.com/cloud/multicloud/what-is-multicloud/" target="_blank">Multicloud</a></li>
                                    <li class="footer-list__item"><a href="https://www.oracle.com/cloud/" target="blank">Oracle Cloud Infrastructure</a></li>
                                    <li class="footer-list__item"><a href="https://marketplace.visualstudio.com/items?itemName=oracle-labs-graalvm.graal-cloud-native-pack" target="blank">VS Code Tools</a></li>
                                </ul>
                            </div>
                        </div>
                        <div class="col-md-6 col-sm-12 aligning_1024">
                            <div class="card--footer card--hovered box">
                                <div>
                                    <div class="rubber-footer footer__oci-section">
                                        <p class="title-footer quickstart">Build, test, and deploy applications on Oracle Cloud Infrastructure for free</p>
                                        <a href="https://www.oracle.com/cloud/free/" target="_blank" class="btn btn-primary">Try Oracle Cloud Infrastructure Free Tier</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-12 col-sm-12 col-md-12 col-lg-12">
                        <div class="row">
                            <div class="col-sm-12">
                                <p class="copyright">
                                    Copyright © 2023, 2025, Oracle and/or its affiliates.
                                    All rights reserved.
                                    Oracle and Java are registered trademarks of Oracle and/or its affiliates.<br>
                                    Micronaut<sup>®</sup> is a registered trademark of Object Computing, Inc.
                                    Use is for referential purposes and does not imply any endorsement or affiliation with any third-party product.
                                    Unauthorized use is strictly prohibited. Other names may be trademarks of their respective owners.
                                </p>
                                <div id="teconsent"></div>
                            </div>
                        </div>

                    </div>
                </div>

            </div>
        </div>
    </footer>

    <script>
        function fadeInAndOut(thz) {
            var elmt = thz.nextElementSibling;//Get the element that is below the button that
            //was just clicked
            if (elmt.clientHeight) {
                elmt.style.height = 0;
            } else {
                var wrapper = elmt.querySelector('ul');
                elmt.style.height = wrapper.clientHeight + "px";
            }
            /*
                elmt.classList.toggle("acordianPanelHidden");//Toggle the class which changes
                //attributes which triggers the transition CSS
                */
        }

        // Check TRUSTe Consent for Functional or Implied Approval
        // The if test verifies if the user has given the consent
        if ( (oracle.truste.api.getGdprConsentDecision().consentDecision) &&
            (oracle.truste.api.getGdprConsentDecision().consentDecision.indexOf(0) != -1 ||
                oracle.truste.api.getGdprConsentDecision().consentDecision.indexOf(2) != -1) ) {

            //The following is a sample of a Maxymiser Tag being written to the DOM
            //If the user did not give consent, then the tag is not included and not invoked in the Browser
            document.write('<script type="text/javascript" src="//service.maxymiser.net/cdn/oracle/js/mmcore.js"><\/script>');
        }

        // Check TRUSTe Consent for Advertising or Implied Approval
        // The if test verifies if the user has given the consent
        if ( (oracle.truste.api.getGdprConsentDecision().consentDecision) &&
            (oracle.truste.api.getGdprConsentDecision().consentDecision.indexOf(0) != -1 ||
                oracle.truste.api.getGdprConsentDecision().consentDecision.indexOf(3) != -1) ) {

            //The following is a sample of a BlueKai Core Tag being written to the DOM
            //If the user did not give consent, then the tag is not included and not invoked in the Browser
            document.write('<script type="text/javascript">' +
                'window.bk_async = function() { ' +
                'BKTAG.doTag(62581, 1); }; ' +
                '(function() { ' +
                'var scripts = document.getElementsByTagName(\'script\')[0]; ' +
                'var s = document.createElement(\'script\'); ' +
                's.async = true; ' +
                's.src = "https://tags.bkrtx.com/js/bk-coretag.js"; ' +
                'scripts.parentNode.insertBefore(s, scripts); ' +
                '}()); ' +
                '<\/script>');
        }
    </script><script type="text/javascript" src="//service.maxymiser.net/cdn/oracle/js/mmcore.js"></script><script type="text/javascript">window.bk_async = function() { BKTAG.doTag(62581, 1); }; (function() { var scripts = document.getElementsByTagName('script')[0]; var s = document.createElement('script'); s.async = true; s.src = "https://tags.bkrtx.com/js/bk-coretag.js"; scripts.parentNode.insertBefore(s, scripts); }()); </script>

</div>
<div class="overlay"></div>

<!-- Start SiteCatalyst code -->
<script language="JavaScript" src="https://www.oracle.com/us/assets/metrics/ora_otn.js"></script><script type="text/javascript" src="https://www.oracleimg.com/us/assets/metrics/ora_code_otn.js"></script><script type="text/javascript" src="https://www.oracleimg.com/us/assets/metrics/ora_code.js"></script>
<!-- End SiteCatalyst code -->

<script src="https://graal.cloud/gdk/resources/lib/slick-slider/slick.min.js"></script>
<script src='https://graal.cloud/gdk/resources/js/main.js'></script>
<script src="https://graal.cloud/gdk/resources/js/ui.js"></script>
<script src="https://graal.cloud/gdk/resources/js/filters.js"></script>
<script src="https://graal.cloud/gdk/resources/js/sidebar.js"></script>
<script src="https://graal.cloud/gdk/resources/js/labs.js"></script>
<!--<script>-->
<!--    hljs.initHighlightingOnLoad();-->
<!--</script>-->


<iframe name="trustarc_notice" id="trustarcNoticeFrame" title="Trustarc Cross-Domain Consent Frame" src="https://consent.trustarc.com/get?name=crossdomain.html&amp;domain=oracle.com" style="display: none;"></iframe></body></html>